Chalice 〜2ちゃんねる閲覧プラグイン for Vim〜 取扱説明書
                                                            Since: 16-Nov-2001
                                                                  Version: 1.8
                                                 Author: MURAOKA Taoro (KoRoN)
                                                     Last Change: 17-Apr-2003.

概要
  Vim上で2ちゃんねるの掲示板を閲覧するためのプラグインです。Vimさえ動くのであ
  ればどのOSでも同じように操作することができます。スレッドを立てることはできま
  せん。一部2ちゃんねる以外の掲示板を閲覧することが可能な場合もありますが、必
  ずしも読み書きできるとは期待しないでください。また特定の掲示板への対応を要望
  されても通常は対応いたしかねます。

  # 以下の文中ではVim,vim,gvim等など、幾つか異なった表記が現れますが、どれも同
  # じVimとして考えてください。
  
必要要件
  Chaliceを利用するには以下のものが必要になります。1つでも欠けると利用出来ませ
  んので予め入手しインストールしておいてください。
    1. Vim      (テキストエディタ 6.1以降)
    2. cURL     (HTTPアクセスソフトウェア 7.9.4以降SSL推奨)
    3. gzip     (圧縮復号ソフト)
  これらに加えてWindowsで2ちゃんねる以外の掲示板を閲覧する場合には、別途ソフト
  ウェア(4)が必要になる場合があります。
    4. iconv
  UNIXではVimを+iconvでコンパイルするほか次のソフトウェアが必要になります。
    5. qkcかnkf (文字コード変換ソフトウェア qkc推奨)
  つまりChaliceを完全仕様で使用するためにはWindowsならば1,2,3,4が、UNIXならば
  1,2,3,4,5が、MacOSXならば1,2,3,4が必要になります。各必須ソフトウェアの入手法
  は以下を参考にしてください。

  (Vimの入手)
    特に解説すべきことはありませんが、必ず6.1以降を使用してください。
      日本語版ならば http://www.kaoriya.net/ を、
      オリジナルは   http://www.vim.org/     を
    参照してください。

  (cURLの入手)
    Chaliceは2ちゃんねるの閲覧と書込みにcURLという外部プログラムを使用していま
    す。2ちゃんねるへ正しく書込むにはcURLのcookieという仕組みを利用する必要が
    あります。ところがcURLの7.9.4より古いバージョンにはこのcookieを利用する際
    の不具合が知られています。そのためこの不具合が修正された最新版(7.9.4以降)
    が必要です。Windows用のcURLは以下のアドレスのものを使用してください。UNIX
    ではcURLのサイトより最新のソースコードをダウンロード&コンパイルして使用し
    てください。MacOS Xには元から古いcURLがインストールされていますので、利用
    するには別途cURLを入手する必要があります。

    - Windows用 cURL (香り屋配布版)
      http://www.kaoriya.net/dist/curl-7.10.4-win32-ssl.tar.bz2
      http://www.kaoriya.net/#ARCHIVE_CURL

    - cURLオフィシャルサイト (ソースコード他)
      http://curl.sourceforge.net/
    
    - MacOS X用 cURL (.pkg)
      http://homepage.mac.com/kmoro/pkg/curl-7.10.3.pkg.tbz

  (gzipの入手)
    2ちゃんねるは巨大な掲示板であり1日に多くの人が訪れるため、発生する膨大なア
    クセス量が少なからず運営の負担になっています。その負担を少しでも減らすため
    一部のデータは圧縮されています。この圧縮されたデータを読込むためにChalice
    はgzipというソフトウェアを利用しています。gzipはUNIXとMacOS Xでは標準的に
    インストールされています。Windowsの場合は次のサイトからgzipを入手インス
    トールするか、Cygwinを正しくインストールする必要があります。

    - gzip.org (gzip入手先)
      http://www.gzip.org/ Win用バイナリ http://www.gzip.org/gzip124xN.zip
    
    - Cygwin
      http://www.cygwin.com/

  (iconv)
    文字コードを正しく扱うためにiconvというライブラリが必要です。Windowsでは下
    のURLから入手してください。UNIXでは+iconvでコンパイルする必要があります。
    MacOS Xは対応しています(予定)。

    - Windows用 iconv.dll (香り屋配布版)
      http://www.kaoriya.net/dist/iconv-1.8-dll.tar.bz2
      http://www.kaoriya.net/#LIBICONV
    
    - iconvライブラリソースコード
      http://www.gnu.org/directory/libiconv.html

  (qkcの入手)
    UNIXのiconvではコード変換に対応しきれず文字化けすることがあります。それを
    回避するために、文字コード変換外部プログラムとしてqkcかnkfが必要となりま
    す。特に変換精度の良さからqkcを推奨します。下記のサイトよりソースをダウン
    ロードしてインストールしてください。

    - qkcのサイト(ソース)
      http://hp.vector.co.jp/authors/VA000501/index.html

インストール
  ■ Windows
  (Windows お手軽インストール)
    解凍してでてきたディレクトリ chalice-{バージョン名} を vimfiles に変更し、
    curl.exeとgzip.exe一緒にgvim.exeと同じディレクトリへコピーします。このとき
    既に同名のファイル・ディレクトリが存在する場合には上書きしてしまって良いで
    す。あとはVim起動後に
      :Chalice
    とタイプすればプラグインが起動します。インストールは簡単だけどアンインス
    トールが面倒になる、諸刃の剣です。

  (Windows 普通のインストール)
    1. 解凍して出来たディレクトリを適当な場所に置きます。
       ここでは説明のために chalice-{バージョン名} というディレクトリをchalice
       に変更し、gvim.exeと同じディレクトリに置いたとします。
    2. curl.exeとgzip.exeをインストールします。
       インストールとは環境変数PATHで示されるディレクトリのどれかにコピーする
       ことです。よくわからない場合はgvim.exeがあるのと同じディレクトリで良い
       です。
    3. Vimを起動して次のようにタイプします。
       :set runtimepath+=$VIM/chalice
       :runtime plugin/chalice.vim
       :Chalice
    4. 必要ならば個人設定ファイル _vimrc に
         set runtimepath+=$VIM/chalice
       と記述しておけばVimを起動した後
         :Chalice
       とタイプするだけでプラグインが起動します。

  ■ UNIX系
  (UNIXインストール時の注意)
    cURLとqkcもしくはnkf(qkc推奨)のインストールを忘れないでください。ftplugin
    を利用するので、これを有効にするのを忘れないでください。
      :filetype plugin on
    $VIMRUNTIME/vimrc_example.vimをsourceすれば自動的に有効化されます。

  (UNIXお手軽インストール)
    インストールスクリプトを作成しました。以下のようにインストール可能です。
      > su ; sh ./install.sh
    $VIMRUNTIMEらしいところにvimfilesを作って必要なファイルをコピーしているだ
    けです。

  (UNIX手動インストール)
    基本的に(Windows 普通のインストール)と同じ方法でインストールが可能です。

  ■ MacOS X
  (Mac OS X お手軽インストール)
    解凍してでてきたディレクトリ chalice-{バージョン名} を vimfiles に変更し、
    gvim実行ファイルと同じディレクトリへコピーします。このとき既に同名のファイ
    ル・ディレクトリが存在する場合には上書きしてしまって良いです。cURL(7.9.4以
    降)を正しくインストールします。あとはVim起動後に
      :Chalice
    とタイプすればプラグインが起動します。インストールは簡単だけどアンインス
    トールが面倒になる、諸刃の剣です。

  (Mac OS X 普通のインストール)
    1. 解凍して出来たディレクトリを適当な場所に置く
       ここでは説明のために chalice-{バージョン名} というディレクトリをchalice
       に変更し、Vimのアイコンと同じディレクトリに置いたとします。
    2. curlをインストールします。
       詳細はcURLの入手先に従ってください。
    3. Chaliceを実行する
       Vimを起動して次のコマンドをタイプするとChaliceが起動します。
       :set runtimepath+=$VIM/chalice
       :runtime plugin/chalice.vim
       :Chalice
    4. (必要ならば)簡単に起動できるようにする
       個人設定ファイル $VIM/_vimrc に
         set runtimepath+=$VIM/chalice
       と記述しておけばVimを起動した後
         :Chalice
       とタイプするだけでプラグインが起動します。

起動方法・使い方・終了方法・ヘルプ
  Chaliceを起動するにはインストール後、Exモードコマンドで
    :Chalice
  を実行します。使用法はヘルプファイルに記載されています。正しくインストールが
  行なわれていれば、次のコマンドでヘルプを確認できます。
    :help Chalice
  チュートリアルもありますので初めて使う人は必ず確認してください。通常、ヘルプ
  ファイルは:Chalice実行時に自動的にインストールされます。
  q を押すとChaliceは終了します。わからないことがあった際には、まずヘルプファ
  イルをご覧ください。

パッチ入手先
  正式リリース後に施されたバグ修正や機能拡張については、パッチの形で提供しま
  す。以下のURLを参照してください:

  - Chalice用パッチ置き場
    http://www.kaoriya.net/testdir/patches-chalice

CVS利用について
  試験的にCVSによる配布も行なっています。CVS版を利用することで正式版リリース後
  に公開されるであろうパッチを自動的に適用することができるようになり、最新版を
  利用するためにはパッチが公開される度に手動で行なわなければならなかった、ファ
  イルのダウンロード→プログラムpatchの起動という面倒な作業から解放されます。
  パッチはバグフィックスや機能追加のために頻繁にリリースされることもありますの
  で、CVSが何かと便利だと思われます。CVSにアクセスするのに必要な情報は以下のと
  おりです。

  - CVSサーバ情報
    (プロトコル)  pserver
    (サーバ)      cvs.kaoriya.net
    (ユーザ)      anonymous
    (パスワード)  無し
    (ルート)      /anonycvs
    (モジュール)  chalice

  - 利用例1: 初回ダウンロード
    cvs -d :pserver:anonymous@cvs.kaoriya.net:/anonycvs login
    (パスワードを聞かれますが何も入力せずにEnterを押してください)
    cvs -d :pserver:anonymous@cvs.kaoriya.net:/anonycvs -z3 checkout chalice
  - 利用例2: アップデート
    cd chalice
    cvs -z3 update -dP

  CVSの利用方法の詳細については以下を参照してください。

  - バージョン管理システム CVS を使う
    http://radiofly.to/nishi/cvs/
  - CVSの本家本元
    http://www.cvshome.org/

  尚、動的DNSを利用している関係上、月初めなど一時的にCVSサーバに接続できなくな
  る場合があります。あらかじめご了承ください。

利用許諾
  以下の諸条件に合意された方へ本ソフトウェアの利用が許諾されます。

    本ソフトウェアを利用することで、ソフトウェア利用者にはソフトウェア作成者へ
    対価を支払う義務が生じません。

    本ソフトウェアの不具合がソフトウェア作成者へ報告された場合には、ソフトウェ
    ア作成者は期間を限定せずに本ソフトウェアを修正しますが、修正前後を問わず本
    ソフトウェアの利用に際して生じた損害をソフトウェア作成者は補償しません。

    ソフトウェア利用者は本ソフトウェアを、商用・非商用を問わず、使用・再配布す
    ることができます。
    
    ソフトウェア利用者へは本ソフトウェアを改変する権利がソフトウェア作成者より
    与えられます。但し本ソフトウェアへ改変を施したバージョンを再配布する場合に
    は、改変内容及びその実装方法をソフトウェア作成者へ無条件で開示する義務が生
    じます。

  以上の諸条件に合意できない場合は本ソフトウェアの利用を中止してください。

質問や要望の連絡先
  2ちゃんねる、メール、もしくはVim掲示板でお願いします。改良案がある人は遠慮し
  ないで連絡してください。特にパッチは大歓迎です。要望だけだと必ずしも満たすこ
  とは保証できかねます。

  - Vim掲示板
    http://www.kaoriya.net/bbs/bbs.cgi

  - 村岡のemailアドレス
    koron@tka.att.ne.jp

  - 2ch/ソフトウェア板/【2ch閲覧】Chalice for Vim
    Vol.3   http://pc2.2ch.net/test/read.cgi/software/1046263908/l50
    Vol.2   http://pc2.2ch.net/test/read.cgi/software/1021773436/l50
    Vol.1   http://pc.2ch.net/software/kako/1006/10068/1006852780.html
  - 2ch/UNIX板/Vim6 Part5
    http://pc.2ch.net/test/read.cgi/unix/1045365370/l50

謝辞
  - Chalice/vim6スレの住人さん達
  - パッチをくれた皆さん
  - MacOSX版cURLを配布してくださっている2052さん(この名前で良いのか?!)
  - チュートリアル、カスタマイズ例、FAQを執筆してくれた◆PYOQ4sjoさん
  - ハートに火を点けてくれた「まっつん」こと松本さん
  - そしてVimの作者Bram Moolenaar氏
  以上の方々に感謝いたします。

更新履歴
  ● 18-Apr-2003 (1.8正式版)
    ドキュメント修正
    起動AA変更
    ローカルあぼーんのカスタマイズ可能化
    (1.7.076)整形キャッシュとローカルあぼーんの整合性を修正
    (1.7.075)アニメーション処理の最適化
    (1.7.074)空白を含むローカルパスが開けない問題に暫定対応
    (1.7.073)AA表示時の再現性、使い勝手の向上
    (1.7.072)整形にundolevels=-1を使うことで編集中のundoを使えるようにする
    (1.7.071)dolib.vimの読み込みを追加
    (1.7.070)NGワードを設定していない時に検索履歴が削れられる問題を修正
    (1.7.069)FAQの修正と追加
    (1.7.068)ヘルプ内のURLを修正
    (1.7.067)cvsコマンドに-z3オプションを推奨
    (1.7.066)TODOリスト更新
    (1.7.065)整形キャッシュファイルをエンコード毎に別に作成する
    (1.7.064)既得スレ数をチェックした際に整形キャッシュを更新する
    (1.7.063)スレ一覧にも整形キャッシュを導入
    (1.7.062)書き込みの行頭スペースがHTMLで潰れるのを修正
    (1.7.061)差分整形時に進捗状況が表示されなかったのを修正
    (1.7.060)バックアップファイルが作られるのを回避
    (1.7.059)Cursor系のhighlightを使わない
    (1.7.058)記事数、DATサイズが正しく設定されないのを修正
    (1.7.057)フォーマットキャッシュディレクトリを無視対象へ追加
    (1.7.056)バージョンチェックで関係パスに空白が含まれる際の問題を修正
    (1.7.055)半自動巡回機能追加
    (1.7.054)板一覧にフォーマットキャッシュを導入
    (1.7.053)無駄に溜まってしまう検索履歴を削除
    (1.7.052)Win9XでAL_delete()が動かなかったのを修正
    (1.7.051)MacOSXで必要ならば環境変数PATHに/usr/local/binを追加する
    (1.7.050)README_j.txtの内容を現状にフォローアップ
    (1.7.049)マニュアルの表記ミス修正
    (1.7.048)差分整形時にメッセージを表示する
    (1.7.047)dat読み込み時にencを指定することで高速化
    (1.7.046)非DATDIR環境でエラーが出るのを修正
    (1.7.045)フォーマットキャッシュの導入
    (1.7.044)キャッシュマネージャー追加
    (1.7.043)alice.vimへの機能追加
    (1.7.042)スクリプトのバージョン管理を最新の方法に変更
    (1.7.041)DATDIR移行が絶対成功しなかったのを修正
    (1.7.040)板一覧とスレ一覧のサイズを設定できるようにオプション追加
    (1.7.039)DATDIR移行コマンドを新設
    (1.7.038)DATDIR作成の条件を変更。副作用として未移行の場合起動が遅くなる
    (1.7.037)スレ一覧表示の高速化
    (1.7.036)1.7.035の修正…や、やりすぎた
    (1.7.035)DATDIR関連を最適化。板整形が速くなったはず。
    (1.7.034)ディレクトリが作成できない時にDATDIR移行が失敗するのを修正
    (1.7.033)多階層のディレクトリ作成に失敗するケースがあったのを修正
    (1.7.032)HTML化した際の見た目を修正
    (1.7.031)DATDIR形式への移行ツールを追加
    (1.7.030)DATDIR形式を導入2
    (1.7.029)DATDIR形式を導入
    (1.7.028)verbose>=3の時にエラーが出るtypo修正。髭氏
    (1.7.027)開いたURLをlCursorでハイライト表示する
    (1.7.026)>>1プレビュー表示タイミングを変更
    (1.7.025)&nbsp;への変換を最小限に
    (1.7.024)1プレビューの更新タイミングを変更
    (1.7.023)WinでURLを開くためのツールminshellのソースコードを追加
    (1.7.022)板を開いた時にハイライト
    (1.7.021)WindowsでURLが開けないケースにminshell.exeで対応
    (1.7.020)ヘルプファイルを修正
    (1.7.019)oyster●認証へ対応
    (1.7.018)ソースコードを見やすくする
    (1.7.017)AL_echo()とAL_echon()を追加
    (1.7.016)未設定変数retvalが参照される可能性があったのを修正
    (1.7.015)mkpkgのpost buildが正しく実行されていなかったのを修正
    (1.7.014)新mkpkgシステムを導入
    (1.7.013)書込失敗かつバッファ消失時、新規書込バッファに同内容を自動復帰
    (1.7.012)ローカルあぼーん機能を追加
    (1.7.011)キャッシュディレクトリのVERSIONを無視
    (1.7.010)updateターゲットをMakefileに追加
    (1.7.009)手動でプラグインを読み込むことができなかったのを修正
    (1.7.008)…AAが出なくなってた。アホや
    (1.7.007)cvs update時にはフラグ-dPを推奨する
    (1.7.006)cache/内の.cvsignoreに最近追加したファイルの種類を追加
    (1.7.005)1.7.004で行なった中途半端な関数化を完遂
    (1.7.004)起動AAの仕様を厳密化、それに伴うオプションフラグの変更
    (1.7.003)通常、起動直後のカーソルは板一覧へ
    (1.7.002)バージョンチェックを無効にするためのフラグを追加
    (1.7.001)起動AAの差し替えとバージョン文字列修正

後記
  Chaliceは「チャリス」と発音します。辞書をひけば「杯・聖杯」という意味になり
  ます。開発コードを「Alice」にしたかったという単純な動機から、ちょっとヒネろ
  うかと/\caliceで辞書を検索したところ、今の名前がひっかかりました。2chのブラ
  ウザということもあり、語呂も良さそうなのでChaliceに決定しました。そんな経緯
  の名前なので「ちゃんねるアリス」とか「アリスちゃん」とか、呼びやすい名前で呼
  んでもらって結構です。もっと良い名前があったら変えちゃうかもしれません。

-------------------------------------------------------------------------------
                  生きる事への強い意志が同時に自分と異なる生命をも尊ぶ心となる
                                   MURAOKA Taro/村岡太郎 <koron@tka.att.ne.jp>
 vim:set ts=8 sts=2 sw=2 tw=78 et ft=memo:
